<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // this바인딩 - 중첩 객체(객체 안의 객체가 있을때) 그리고 객체안에 메서드가 있을때 this가 어떻게 되는지?

      const person = {
        myname: "codingmax",
        info: {
          city: "seoul",
          printInfo: function () {
            // 디버거를 체크해보면 this포인터는 객체로 되어있는데 속성을 확인해보면 이 함수의 this포인트는
            // info임
            console.log(`${this.myname} lives in the ${this.city}`);
            //this포인터는 info객체이고 myname은 person의 객체임 즉 info객체에서 myname을 찾으려 하기 때문에 에러가발생
            // 스코프체인을 이용하는 수 밖에 없음, 스크립트 스코프에 person객체가 존재하기 때문
            // this.myname를 person.myname로 변경하면 됨
          },
        },
      };

      // printInfo를 호출할때 info객체의 메서드로 호출했기때문에 this포인터는 info로 바인딩이 됨
      // 중첩 객체 메서드에서 상위 객체에 접근할때는 스코프 체인을 이용하는 수 밖에 없음
      person.info.printInfo(); //printInfo객체 내부의 this포인터가 undefined가 뜸
      // 그래서 person에 대한 정보는 없는것임

      // 그리고 해당 객체는 const로 선언이 되었기 때문에 this는 스크립트 스코프로 존재함

      // 자바스크립트의 this바인딩이 어려운 이유는 동적이기 때문임
      // 일반함수는 자체적인 this포인트가 있고 화살표함수는 자체적인 this바인딩이 없기 때문에
      // 일반함수화 화살표함수를 콜백함수로 사용할때 this바인딩 측면에서 문제가 발생할수 있었음

      // 문법이 어렵기보다 여려상황에 의해 달라지는 내용들을 기억해야하기 때문임
      // 그래서 this바인딩 관련된 코드작성 과 디버거를 체크하는 연습을 많이 해야함
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 변수 스코프, var문제점 1
      //var는 함수 스코프를
      // es6에서는 let, const 블록 스코프
      function testVarScope() {
        //console.log(x);
        if (true) {
          var x = 5;
        }
        console.log(x); // var는 함수에 스코프를 가지고 있어서 참조가 됨
      }
      testVarScope();

      function testTimer() {
        for (var i = 0; i < 3; i++) {
          setTimeout(function () {
            // 콜백함수, for문의 실행이 끝난뒤에 실행됨
            //console.log(i);
          }, 1000); // for문이 끝나는 시간이 1초보다 짧다 그래서 i값은 이미 3이 된 상태에서 setTimeout이 실행됨
        }
        //console.log("for문종료", i); // for문이 끝나고 setTimeout보다 먼저 실행됨
        // var변수는 함수에 스코프를 가지고 있어서 0, 1, 2가 아닌 3이 출력됨
      }
      testTimer();

      function testTimer2() {
        for (let i = 0; i < 3; i++) {
          setTimeout(function () {
            // console.log(i); 0, 1, 2가 실행됨
            // 그래서 let을 사용함 const는 상수기때문에 사용불가
          }, 1000);
        }
      }
      testTimer2();

      function testBlockScope() {
        if (true) {
          let x = 10; // let x는 if문의 블록 스코프를 가지고 있음 const도 동일함
        }
        console.log(x); // 그래서 x를 클릭시 참조오류가 발생함
      }
      testBlockScope();
    </script>
  </body>
</html>
